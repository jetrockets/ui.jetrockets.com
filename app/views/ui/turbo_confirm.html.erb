<%
  set_meta_tags(
    title: "Turbo Confirm - Rails UI Components",
    description: "Turbo Confirm component for confirmation modals.",
    keywords: "Rails, UI Components, Turbo Confirm"
  )
%>
<% breadcrumb :ui_turbo_confirm %>

<article>
  <header class="header">
    <div class="header__heading">
      <h1 class="header__title">Turbo Confirm</h1>
      <p class="header__subtitle">
        Turbo Confirm component for confirmation modals.
      </p>
    </div>

    <div class="header__actions">
      <%= link_to "View on GitHub", "https://github.com/jetrockets/ui.jetrockets.com/tree/main/app/components/ui/turbo_confirm", class: "btn btn-secondary", target: "_blank", rel: "noopener noreferrer" %>
    </div>
  </header>

  <section>
    <div class="flex flex-col mb-12 gap-4">
        <%= render Ui::Alert::Component.new title: "To use the Turbo Confirm component, you need to set a custom confirm method using the following JavaScript code", type: :warning %>
        <pre><code>Turbo.setConfirmMethod((message) => {
  const dialog = document.getElementById('turbo-confirm')
  dialog.querySelector('p').textContent = message
  dialog.showModal()

  return new Promise((resolve) => {
    dialog.addEventListener('close', () => {
      resolve(dialog.returnValue === 'confirm')
    }, { once: true })

    dialog.addEventListener('click', (event) => {
      if (event.target.nodeName === 'DIALOG') {
        dialog.returnValue = 'cancel'
        dialog.close()
      }
    })
  })
})

&lt;!-- And somewhere in your layout --&gt;
&lt;%= render Ui::TurboConfirm::Component.new %&gt;
</code></pre>
    </div>

    <h2 class="h3">Example</h2>
    <%= turbo_frame_tag :ui_turbo_confirm, data: { turbo_action: :advance }, target: :_top do %>
      <%= render Ui::Tabs::Component.new class: "mb-6" do |tabs| %>
        <% tabs.with_item title: "Preview", href: ui_turbo_confirm_path, data: { turbo_frame: :ui_turbo_confirm }, active: !params[:code] %>
        <% tabs.with_item title: "Code", href: ui_turbo_confirm_path(code: true), data: { turbo_frame: :ui_turbo_confirm }, active: params[:code] %>
      <% end %>

      <div class="flex flex-col mb-12 gap-4">
        <% unless params[:code] %>
          <%= render "ui/examples/turbo_confirm" %>
        <% else %>
          <%= render_code_example("ui/examples/_turbo_confirm") %>
        <% end %>
      </div>
    <% end %>
  </section>
</article>
